
import { expect, test } from "vitest";
import { roundPrecision } from ".";

test("Check number precision", () => {
  const dataRound = [
    [0, 1, 0],
    [0, 0, 0],
    [0.7875, 3, 0.788],
    [0.105, 2, 0.11],
    [1, 1, 1],
    [0.1049999999, 2, 0.1],
    [0.105, 1, 0.1],
    [1.335, 2, 1.34],
    [1.35, 1, 1.4],
    [12345.105, 2, 12345.11],
    [0.0005, 2, 0],
    [0.0005, 3, 0.001],
    ["0", 1, 0],
    ["0", 0, 0],
    ["0.7875", 3, 0.788],
    ["0.105", 2, 0.11],
    ["1", 1, 1],
    ["0.1049999999", 2, 0.1],
    ["0.105", 1, 0.1],
    ["1.335", 2, 1.34],
    ["1.35", 1, 1.4],
    ["12345.105", 2, 12345.11],
    ["0.0005", 2, 0],
    ["0.0005", 3, 0.001],
    [1.2345e3, 3, 1234.5],
    [1.2344e3, 3, 1234.4],
    [1e3, 1, 1000],
    ["1.2345e3", 3, 1234.5],
    ["1.2344e3", 3, 1234.4],
    ["1e3", 1, 1000],
    // ["-0.125", 2, -0.13],
    // ["-0.001", 2, 0.0],
    // ["-0.005", 2, -0.01],
    ["0.125", 2, 0.13],
    ["0.001", 2, 0.0],
    ["0.005", 2, 0.01],
    [-0.125, 2, -0.13],
    [-0.001, 2, 0.0],
    [-0.005, 2, -0.01],
    [0.125, 2, 0.13],
    [0.001, 2, 0.0],
    [0.005, 2, 0.01],
  ];
  test.concurrent.each(dataRound)("Round %s with %d fixed = %d", (a, b, output) => {
    // @ts-expect-error Ignore type check
    expect(roundPrecision(a, b)).toBe(output);
  });
});
